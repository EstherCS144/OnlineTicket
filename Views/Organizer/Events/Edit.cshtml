@model OnlineTicket.ViewModels.EventEditViewModel
@{
    ViewData["Title"] = "Edit Event";
}

<div class="container mx-auto p-6">
    <h1 class="text-2xl font-bold mb-4">Update Your Event</h1>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="bg-green-100 text-green-800 p-3 rounded mb-4 flex justify-between items-center">
            <span>@TempData["SuccessMessage"]</span>
            <button type="button" class="ml-4 font-bold" onclick="this.parentElement.style.display='none'">×</button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="bg-red-100 text-red-800 p-3 rounded mb-4 flex justify-between items-center">
            <span>@TempData["ErrorMessage"]</span>
            <button type="button" class="ml-4 font-bold" onclick="this.parentElement.style.display='none'">×</button>
        </div>
    }

    <form asp-action="EditEvent" method="post" enctype="multipart/form-data" class="space-y-4">
        <input type="hidden" asp-for="EventId" />
        <div>
            <label class="block font-semibold">Title</label>
            <input asp-for="Title" class="w-full border px-3 py-2 rounded" />
            <span asp-validation-for="Title" class="text-red-500 text-sm"></span>
        </div>

        <div>
            <label class="block font-semibold">Description</label>
            <textarea asp-for="Description" class="w-full border px-3 py-2 rounded"></textarea>
            <span asp-validation-for="Description" class="text-red-500 text-sm"></span>
        </div>

        <div>
            <label class="block font-semibold">Event Date</label>
            <input asp-for="EventDate" type="datetime-local" class="w-full border px-3 py-2 rounded" />
            <span asp-validation-for="EventDate" class="text-red-500 text-sm"></span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block font-semibold">Ticket Price</label>
                <input asp-for="TicketPrice" type="number" step="0.01" class="w-full border px-3 py-2 rounded" />
                <span asp-validation-for="TicketPrice" class="text-red-500 text-sm"></span>
            </div>
            <div>
                <label class="block font-semibold">Total Seats</label>
                <input asp-for="TotalSeats" type="number" class="w-full border px-3 py-2 rounded" />
                <span asp-validation-for="TotalSeats" class="text-red-500 text-sm"></span>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label class="block font-semibold">Category</label>
                <select asp-for="CategoryId" asp-items="Model.Categories" class="w-full border px-3 py-2 rounded"></select>
            </div>
            <div>
                <label class="block font-semibold">Venue</label>
                <select asp-for="VenueId" asp-items="Model.Venues" class="w-full border px-3 py-2 rounded"></select>
            </div>
        </div>

        <div>
            <label class="block font-semibold">Existing Image</label>
            @if (!string.IsNullOrEmpty(Model.ExistingImagePath))
            {
                <img src="@Model.ExistingImagePath" class="w-64 h-48 object-cover rounded mb-2" />
            }
            <label class="block font-semibold">Change Image</label>
            <input asp-for="ImageFile" type="file" class="w-full border px-3 py-2 rounded" />
        </div>

        <button type="submit" class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">Update Event</button>
        <div class="mt-6">
            <a asp-action="Events" class="px-4 py-2 border rounded text-gray-700 hover:bg-gray-100">Back to Events</a>
        </div>
    </form>
</div>

@section Scripts{
    <partial name="_ValidationScriptsPartial" />
}
